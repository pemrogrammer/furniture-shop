{"version":3,"sources":["../../src/databases/index.ts"],"sourcesContent":["import Sequelize from 'sequelize';\r\nimport { NODE_ENV, DB_HOST, DB_PORT, DB_USER, DB_PASSWORD, DB_DATABASE } from '@config';\r\nimport UserModel from '@models/users.model';\r\nimport { logger } from '@utils/logger';\r\n\r\nconst sequelize = new Sequelize.Sequelize(DB_DATABASE, DB_USER, DB_PASSWORD, {\r\n  dialect: 'mysql',\r\n  host: DB_HOST,\r\n  port: DB_PORT,\r\n  timezone: '+09:00',\r\n  define: {\r\n    charset: 'utf8mb4',\r\n    collate: 'utf8mb4_general_ci',\r\n    underscored: true,\r\n    freezeTableName: true,\r\n  },\r\n  pool: {\r\n    min: 0,\r\n    max: 5,\r\n  },\r\n  logQueryParameters: NODE_ENV === 'development',\r\n  logging: (query, time) => {\r\n    logger.info(time + 'ms' + ' ' + query);\r\n  },\r\n  benchmark: true,\r\n});\r\n\r\nsequelize.authenticate();\r\n\r\nconst DB = {\r\n  Users: UserModel(sequelize),\r\n  sequelize, // connection instance (RAW queries)\r\n  Sequelize, // library\r\n};\r\n\r\nexport default DB;\r\n"],"names":["sequelize","Sequelize","DB_DATABASE","DB_USER","DB_PASSWORD","dialect","host","DB_HOST","port","DB_PORT","timezone","define","charset","collate","underscored","freezeTableName","pool","min","max","logQueryParameters","NODE_ENV","logging","query","time","logger","info","benchmark","authenticate","DB","Users","UserModel"],"mappings":"AAAA;;;;;AAAsB,IAAA,UAAW,kCAAX,WAAW,EAAA;AAC6C,IAAA,OAAS,WAAT,WAAS,CAAA;AACjE,IAAA,WAAqB,kCAArB,uBAAqB,EAAA;AACpB,IAAA,OAAe,WAAf,iBAAe,CAAA;;;;;;AAEtC,MAAMA,SAAS,GAAG,IAAIC,UAAS,QAAA,CAACA,SAAS,CAACC,OAAW,YAAA,EAAEC,OAAO,QAAA,EAAEC,OAAW,YAAA,EAAE;IAC3EC,OAAO,EAAE,OAAO;IAChBC,IAAI,EAAEC,OAAO,QAAA;IACbC,IAAI,EAAEC,OAAO,QAAA;IACbC,QAAQ,EAAE,QAAQ;IAClBC,MAAM,EAAE;QACNC,OAAO,EAAE,SAAS;QAClBC,OAAO,EAAE,oBAAoB;QAC7BC,WAAW,EAAE,IAAI;QACjBC,eAAe,EAAE,IAAI;KACtB;IACDC,IAAI,EAAE;QACJC,GAAG,EAAE,CAAC;QACNC,GAAG,EAAE,CAAC;KACP;IACDC,kBAAkB,EAAEC,OAAQ,SAAA,KAAK,aAAa;IAC9CC,OAAO,EAAE,CAACC,KAAK,EAAEC,IAAI,GAAK;QACxBC,OAAM,OAAA,CAACC,IAAI,CAACF,IAAI,GAAG,IAAI,GAAG,GAAG,GAAGD,KAAK,CAAC,CAAC;KACxC;IACDI,SAAS,EAAE,IAAI;CAChB,CAAC,AAAC;AAEH1B,SAAS,CAAC2B,YAAY,EAAE,CAAC;AAEzB,MAAMC,EAAE,GAAG;IACTC,KAAK,EAAEC,CAAAA,GAAAA,WAAS,AAAW,CAAA,QAAX,CAAC9B,SAAS,CAAC;IAC3BA,SAAS;IACTC,SAAS,EAATA,UAAS,QAAA;CACV,AAAC;eAEa2B,EAAE"}